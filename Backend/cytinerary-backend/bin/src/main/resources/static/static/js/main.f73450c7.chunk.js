(this.webpackJsonpCytinerary=this.webpackJsonpCytinerary||[]).push([[0],{79:function(e,t,a){e.exports=a(90)},84:function(e,t,a){},85:function(e,t,a){},90:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(9),c=a.n(i),o=(a(84),a(24)),l=a(67),s=a(130),p=a(123),u=a(46),d=a.n(u),m=a(47),h=a.n(m),f=a(30),y=a.n(f),E=(a(85),a(59)),b=a(60),v=a(61),g=a(69),C=a(68),j=a(139),S=a(120),O=a(121),k=a(136),I=a(137),w=function(e){Object(g.a)(a,e);var t=Object(C.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).state={name:"",description:"",label:"",fromDate:new Date,toDate:new Date,emptyFieldMessageVisible:!1,participantsDialogVisible:!1,participantsError:!1,participants:[],participantsNetIds:"",participantValue:"",participantsErrorLabel:""},n}return Object(v.a)(a,[{key:"submit",value:function(){var e=this;if(""===this.state.name||""===this.state.description)this.setState({emptyFieldMessageVisible:!0});else{var t=Object(I.a)();try{fetch("/createEvent",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({eventId:t,creator:this.props.user,name:this.state.name,description:this.state.description,label:this.state.label})}).then((function(a){var n,r=Object(E.a)(e.state.participants);try{for(r.s();!(n=r.n()).done;){var i=n.value;console.log(i);try{fetch("/addParticipant",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({eventId:t,participant:i})}).then((function(e){return e}))}catch(c){console.log(c)}}}catch(c){r.e(c)}finally{r.f()}e.closeModal()}))}catch(a){console.log(a)}}}},{key:"closeModal",value:function(){this.setState({participants:[],participantsNetIds:"",emptyFieldMessageVisible:!1,participantsError:!1,participantsErrorLabel:"",participantValue:"",name:"",description:"",label:""}),this.props.onClose()}},{key:"addParticipant",value:function(){var e=this;this.state.participantValue===this.props.user?this.setState({participantsError:!0,participantsErrorLabel:"You cannot be the participant of the event"}):fetch("/userExists",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({netId:this.state.participantValue})}).then((function(e){return e.json()})).then((function(t){var a=e.state.participants,n=e.state.participantsNetIds;t[0]?e.state.participants.includes(t[0].userId)?e.setState({participantsError:!0,participantsErrorLabel:"You cannot add duplicated participants"}):(a.push(t[0].userId),n+=t[0].netId+", ",e.setState({participants:a,participantsNetIds:n,participantsErrorLabel:"",participantValue:"",participantsError:!1})):e.setState({participantsError:!0,participantsErrorLabel:"User does not exist"})}))}},{key:"render",value:function(){var e=this;return n.createElement("div",null,n.createElement(j.a,{maxWidth:"md",open:this.props.visible,onBackdropClick:function(){e.closeModal()}},n.createElement(S.a,null,"Create an event"),n.createElement(O.a,null,this.state.emptyFieldMessageVisible&&n.createElement("text",{style:{color:"red"}},"Required: Name and Description"),n.createElement("div",{style:{flexDirection:"column"}},n.createElement("div",{style:{display:"flex"}}," ",n.createElement(k.a,{error:this.state.emptyFieldMessageVisible&&""===this.state.name,id:"nameInput",label:"Name",onChange:function(t){e.setState({name:t.target.value})},variant:"outlined"})," "),n.createElement("div",{style:{display:"flex"}}," ",n.createElement(k.a,{error:this.state.emptyFieldMessageVisible&&""===this.state.description,id:"descriptionInput",label:"Description",onChange:function(t){e.setState({description:t.target.value})},variant:"outlined"})," "),n.createElement("div",{id:"time-selector"}),n.createElement("div",{style:{display:"flex"}},n.createElement(k.a,{id:"descriptionInput",onChange:function(t){e.setState({label:t.target.value})},label:"Label",variant:"outlined"})),n.createElement("div",null,n.createElement("text",null,"Participants: ",this.state.participantsNetIds),n.createElement(k.a,{error:this.state.participantsError,value:this.state.participantValue,helperText:this.state.participantsErrorLabel,label:"Participant",id:"participantInput",onChange:function(t){e.setState({participantValue:t.target.value})},variant:"outlined"}),n.createElement(p.a,{onClick:function(){e.addParticipant()}}," Add Participant")),n.createElement("div",null,n.createElement(p.a,{onClick:function(){e.closeModal()},style:{color:"black"}},"Cancel"),n.createElement(p.a,{onClick:function(){e.submit()},style:{color:"black"}},"Create"))))))}}]),a}(n.Component),T=a(131),x=a(133),N=a(116),V=a(122),P=a(134),A=a(135),M=a(132),J=a(124),U=a(125),D=a(141),F=a(126),L=a(127),R=a(128),W=a(129);var B=function(e){return r.a.createElement(J.a,null,r.a.createElement(U.a,null,r.a.createElement(D.a,{style:{backgroundColor:e.color,color:"white"}},e.name.charAt(0))),r.a.createElement(F.a,{primary:e.name,secondary:e.email}),r.a.createElement(L.a,null,r.a.createElement(R.a,{edge:"end",onClick:function(){return e.onRemove()}},r.a.createElement(W.a,null))))};var Y=function(e){return r.a.createElement(J.a,{onClick:function(){return e.onClick()},style:{cursor:"grab"}},r.a.createElement(U.a,null,r.a.createElement(D.a,{style:{backgroundColor:e.color,color:"white"}},e.name.charAt(0))),r.a.createElement(F.a,{primary:e.name,secondary:e.email}))},z=Object(l.a)({palette:{primary:{main:d.a[600]},secondary:{main:h.a[700]},type:"dark",background:{paper:y.a[800],default:y.a[900]}},typography:{fontFamily:"Roboto"}});var H=function(e){var t=Object(n.useState)([]),a=Object(o.a)(t,2),i=a[0],c=a[1],l=Object(n.useState)([]),u=Object(o.a)(l,2),d=u[0],m=u[1],h=Object(n.useState)(null),f=Object(o.a)(h,2),y=f[0],E=f[1],b=Object(n.useState)(""),v=Object(o.a)(b,2),g=v[0],C=v[1];function I(e){try{fetch("/getSharedUsers",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({sharerId:e})}).then((function(e){return e.json()})).then((function(e){var t=[];e.forEach((function(e){t.push({userId:e[0],name:e[3]+" "+e[2],email:e[1]+"@iastate.edu"})})),c(t)}))}catch(t){console.log(t)}}return Object(n.useEffect)((function(){try{fetch("/getUsers",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=[];e.forEach((function(e){t.push({userId:e.userId,name:e.firstName+" "+e.lastName,email:e.netId+"@iastate.edu"})})),m(t)}))}catch(e){console.log(e)}}),[]),Object(n.useEffect)((function(){return I("111")}),[]),r.a.createElement(j.a,{open:e.visible,onClose:function(){return e.onClose()},fullWidth:!0,maxWidth:"sm",style:{zIndex:1}},r.a.createElement(s.a,{theme:z},r.a.createElement(S.a,null,"Share Schedule"),r.a.createElement(O.a,null,r.a.createElement(k.a,{variant:"filled",label:"Add people",style:{width:"100%"},InputProps:{startAdornment:r.a.createElement(T.a,{position:"start"},r.a.createElement(M.a,null))},onChange:function(e){E(e.currentTarget),C(e.target.value)},key:"input"}),r.a.createElement(x.a,{open:""!==g,anchorEl:y,placement:"bottom-start",style:{zIndex:2}},r.a.createElement(N.a,null,r.a.createElement(V.a,null,d.map((function(e,t,a){return(e.name.toUpperCase().includes(g.toUpperCase())||e.email.toUpperCase().includes(g.toUpperCase()))&&"111"!=e.userId&&!i.some((function(t){return t.userId===e.userId}))&&r.a.createElement(Y,{name:e.name,email:e.email,color:"red",onClick:function(){try{fetch("/addSharedUser",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({sharerId:"111",shareeId:e.userId})}).then((function(){return I("111")}))}catch(t){console.log(t)}I("111"),C("")},key:"".concat(e.name,"-").concat(e.email,"-").concat(t,"-search")})}))))),r.a.createElement(P.a,{style:{marginTop:"10px"}}),r.a.createElement("div",{style:{overflowY:"scroll",height:.26*window.innerHeight,flex:1}},r.a.createElement(V.a,null,i.map((function(e,t,a){return r.a.createElement(B,{name:e.name,email:e.email,color:"red",onRemove:function(){try{fetch("/deleteSharedUser",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({sharerId:"111",shareeId:e.userId})}).then((function(){return I("111")}))}catch(t){console.log(t)}},key:"".concat(e.name,"-").concat(e.email,"-").concat(t,"-shared")})})))),r.a.createElement(P.a,{style:{marginBottom:"10px"}})),r.a.createElement(A.a,null,r.a.createElement(p.a,{variant:"contained",color:"primary",onClick:function(){return e.onClose()}},"Done"))))},q=Object(l.a)({palette:{primary:{main:d.a[600]},secondary:{main:h.a[700]},type:"dark",background:{paper:y.a[800],default:y.a[900]}},typography:{fontFamily:"Roboto"}});var G=function(){var e=Object(n.useState)(!1),t=Object(o.a)(e,2),a=t[0],i=t[1],c=Object(n.useState)(!1),l=Object(o.a)(c,2),u=l[0],d=l[1];return r.a.createElement(s.a,{theme:q},r.a.createElement("div",{style:{display:"flex",backgroundColor:"black",height:window.innerHeight,alignItems:"center",justifyContent:"center"}},r.a.createElement(H,{onClose:function(){return i(!1)},visible:a}),r.a.createElement(w,{visible:u,user:"111",onClose:function(){d(!1)}}),r.a.createElement(p.a,{color:"primary",variant:"contained",onClick:function(){return i(!0)}},"Share"),r.a.createElement(p.a,{color:"primary",variant:"contained",onClick:function(){try{fetch("/getEvents",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({creator:"111"})}).then((function(e){return e.json()})).then((function(e){alert(JSON.stringify(e))}))}catch(e){console.log(e)}}},"View this User's events"),r.a.createElement(p.a,{color:"primary",variant:"contained",onClick:function(){d(!0)}},"Create a New Event")))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(G,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[79,1,2]]]);
//# sourceMappingURL=main.f73450c7.chunk.js.map